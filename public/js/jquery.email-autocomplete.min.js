/*
 * jquery.auto-email - 1.0.1
 * An autocomplete JQuery plugin for email fields.
 *  
 * https://github.com/hisune/jquery.auto-email
 */
!function(t){t.fn.autoEmail=function(e,n,l){return this.each(function(){var r,s=t(this);n=n||e[0],s.keypress(function(i){var a=i.keyCode?i.keyCode:i.which?i.which:i.charCode,h=[8,9,17,18,35,36,37,38,39,40,45];if(!(h.indexOf(a)>=0)){i.preventDefault();var v=t(this)[0].selectionStart,o=t(this)[0].selectionEnd;if(r=t(this).val().length,/^(13|44|59)$/.test(""+a)){if(l){var u;v!=o?u=59==a?"; ":", ":13!=a&&(u=String.fromCharCode(a)),null!=u&&s.val(s.val().substr(0,o)+u+s.val().substr(o,s.val().length))}return s[0].selectionStart=o+(s.val().length-r),void(s[0].selectionEnd=o+(s.val().length-r))}s.val(s.val().substr(0,v)+String.fromCharCode(a)+s.val().substr(o,s.val().length)),r=t(this).val().length-r,s[0].selectionStart=++v,s[0].selectionEnd=o+r;var f,g=t(this).val().substr(0,v).split("@");if(g.length<2||""==g[0]){if(!(s.val().indexOf("@")==-1||v<o))return;f="",c=[n]}else{f=g[g.length-1],e.unshift(n);var c=t.grep(e,function(t,e){return f===t.substr(0,f.length)})}if(c.length>0){var d=c[0].substr(f.length,c[0].length);s.val(s.val().substr(0,v)+(g.length<2?"@":"")+d),s[0].selectionStart=v,s[0].selectionEnd=v+d.length+(g.length<2?1:0)}}})})}}(jQuery);